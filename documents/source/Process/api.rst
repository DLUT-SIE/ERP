.. _Process_API:

工艺模块-API
===============
.. role:: get
.. role:: post
.. role:: patch
.. role:: delete
.. role:: code

工艺库
------

list
^^^^^^^
    返回当前工艺库对应的产品信息列表

    :get:`GET` :code:`/api/process_libraries/`

    ======================== =========== ============================
    参数                      参数类型     描述
    ------------------------ ----------- ----------------------------
    page(Optional)           int         指定页数, 默认值: 1
    ------------------------ ----------- ----------------------------
    limit(Optional)          int         每页数量
    ------------------------ ----------- ----------------------------
    work_order_uid(Optional) str         指定模糊查询的工作令
    ======================== =========== ============================


    =================== =========== ============================
    返回字段              返回类型      描述
    ------------------- ----------- ----------------------------
    id                  int         工艺库id
    ------------------- ----------- ----------------------------
    name                str         产品名称
    ------------------- ----------- ----------------------------
    writer              str         编制人
    ------------------- ----------- ----------------------------
    proofreader         str         审核人
    ------------------- ----------- ----------------------------
    status              int         {0:'未导入',1:'未审核',2:'审核完成'}
    =================== =========== ============================

create
^^^^^^^
    创建工艺库,并导入工艺物料

    :post:`POST` :code:`/process_libraries/upload/`

    =================== =========== ============================
    参数                 参数类型     描述
    ------------------- ----------- ----------------------------
    work_order          int         工作令主键
    ------------------- ----------- ----------------------------
    file                file        上传文件
    =================== =========== ============================

partial_update
^^^^^^^^^^^^^^^^
    更新指定id的工艺库, 返回更新后的工艺库

    :patch:`PATCH` :code:`/api/process_libraries/{id}/`

    =================== =========== ============================
    参数                 参数类型     描述
    ------------------- ----------- ----------------------------
    id                  int         工艺库id
    =================== =========== ============================

    =================== =========== ============================
    返回字段              返回类型      描述
    ------------------- ----------- ----------------------------
    name                str         产品名称
    ------------------- ----------- ----------------------------
    writer              str         编制人
    ------------------- ----------- ----------------------------
    proofreader         str         审核人
    ------------------- ----------- ----------------------------
    status              int         {0:'未导入',1:'未审核',2:'审核完成'}
    =================== =========== ============================

工艺物料
--------

list
^^^^^^^
    返回工艺物料信息

    :get:`GET` :code:`/api/process_materials/`

    ============================= =========== ============================
    参数                           参数类型     描述
    ----------------------------- ----------- ----------------------------
    process_library_id(Optional)  int         工艺库id
    ============================= =========== ============================


    ====================== =========== ============================
    返回字段                 返回类型      描述
    ---------------------- ----------- ----------------------------
    id                     int         工艺物料id
    ---------------------- ----------- ----------------------------
    ticket_number          int         票号
    ---------------------- ----------- ----------------------------
    part_number            int         件号
    ---------------------- ----------- ----------------------------
    drawing_number         str         图号
    ---------------------- ----------- ----------------------------
    parent_drawing_number  str         所属图号
    ---------------------- ----------- ----------------------------
    name                   str         名称
    ---------------------- ----------- ----------------------------
    spec                   str         规格
    ---------------------- ----------- ----------------------------
    count                  int         数量
    ---------------------- ----------- ----------------------------
    material               int         材质
    ---------------------- ----------- ----------------------------
    piece_weight           float       净重
    ---------------------- ----------- ----------------------------
    remark                 str         备注
    ---------------------- ----------- ----------------------------
    total_weight           float       总重
    ====================== =========== ============================

read
^^^^^^^
    返回指定id的工艺物料

    :get:`GET` :code:`/api/process_materials/{id}/`

    =================== =========== ============================
    参数                 参数类型     描述
    ------------------- ----------- ----------------------------
    id                  int         工艺物料的id
    =================== =========== ============================

    ====================== =========== ============================
    返回字段                 返回类型      描述
    ---------------------- ----------- ----------------------------
    id                     int         工艺物料id
    ---------------------- ----------- ----------------------------
    ticket_number          int         票号
    ---------------------- ----------- ----------------------------
    part_number            int         件号
    ---------------------- ----------- ----------------------------
    drawing_number         str         图号
    ---------------------- ----------- ----------------------------
    parent_drawing_number  str         所属图号
    ---------------------- ----------- ----------------------------
    name                   str         名称
    ---------------------- ----------- ----------------------------
    spec                   str         规格
    ---------------------- ----------- ----------------------------
    count                  int         数量
    ---------------------- ----------- ----------------------------
    material               int         材质
    ---------------------- ----------- ----------------------------
    piece_weight           float       净重
    ---------------------- ----------- ----------------------------
    remark                 str         备注
    ---------------------- ----------- ----------------------------
    total_weight           float       总重
    ====================== =========== ============================

partial_update
^^^^^^^^^^^^^^^^
    更新指定id的工艺物料, 返回更新后的工艺物料

    :patch:`PATCH` :code:`/api/process_materials/{id}/`

    =================== =========== ============================
    参数                 参数类型     描述
    ------------------- ----------- ----------------------------
    id                  int         工艺物料的id
    =================== =========== ============================

    ====================== =========== ============================
    返回字段                 返回类型      描述
    ---------------------- ----------- ----------------------------
    ticket_number          int         票号
    ---------------------- ----------- ----------------------------
    part_number            int         件号
    ---------------------- ----------- ----------------------------
    drawing_number         str         图号
    ---------------------- ----------- ----------------------------
    parent_drawing_number  str         所属图号
    ---------------------- ----------- ----------------------------
    name                   str         名称
    ---------------------- ----------- ----------------------------
    spec                   str         规格
    ---------------------- ----------- ----------------------------
    count                  int         数量
    ---------------------- ----------- ----------------------------
    material               int         材质
    ---------------------- ----------- ----------------------------
    piece_weight           float       净重
    ---------------------- ----------- ----------------------------
    remark                 str         备注
    ---------------------- ----------- ----------------------------
    total_weight           float       总重
    ====================== =========== ============================

流转路线
--------

list
^^^^^^^
    返回流转路线列表

    :get:`GET` :code:`/api/circulation_route/`

    =================== =========== ============================
    参数                参数类型    描述
    ------------------- ----------- ----------------------------
    page(Optional)      int         指定页数, 默认值: 1
    ------------------- ----------- ----------------------------
    limit(Optional)     int         每页数量
    ------------------- ----------- ----------------------------
    materiel(Optional)  int         工艺物料id
    =================== =========== ============================


    ================================ =========== ============================
    返回字段                            返回类型    描述
    -------------------------------- ----------- ----------------------------
    materiel                         int         工艺物料id
    -------------------------------- ----------- ----------------------------
    id                               int         流转路线id
    -------------------------------- ----------- ----------------------------
    circulation_routes               list        流转路线
    ================================ =========== ============================

read
^^^^^^^^^
    返回指定id的流转路线

    :get:`GET` :code:`/api/circulation_route/{id}/`

    ====================== =========== ============================
    参数                    参数类型    描述
    ---------------------- ----------- ----------------------------
    id                     int         流转路线id
    ====================== =========== ============================


    ================================ =========== ============================
    返回字段                            返回类型    描述
    -------------------------------- ----------- ----------------------------
    materiel                         int         工艺物料id
    -------------------------------- ----------- ----------------------------
    circulation_routes               list        流转路线
    ================================ =========== ============================

partial_update
^^^^^^^^^^^^^^^^
    更新指定工艺物料id的流转路线, 返回更新后的流转路线

    :patch:`PATCH` :code:`/api/circulation_route/{id}/`

    ====================== =========== ============================
    参数                    参数类型     描述
    ---------------------- ----------- ----------------------------
    id                     int         流转路线id
    ====================== =========== ============================


    ================================ =========== ============================
    返回字段                            返回类型    描述
    -------------------------------- ----------- ----------------------------
    materiel                         int         工艺物料id
    -------------------------------- ----------- ----------------------------
    circulation_routes               list        流转路线
    ================================ =========== ============================


工序路线
---------

list
^^^^^^^
    返回工序路线列表

    :get:`GET` :code:`/api/process_route/`

    =================== =========== ============================
    参数                参数类型    描述
    ------------------- ----------- ----------------------------
    page(Optional)      int         指定页数, 默认值: 1
    ------------------- ----------- ----------------------------
    limit(Optional)     int         每页数量
    =================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    id                  int         工序路线id
    ------------------- ----------- ----------------------------
    materiel            int         工艺物料id
    ------------------- ----------- ----------------------------
    process_steps       list        工艺步骤
    =================== =========== ============================

read
^^^^^^^
    返回指定工艺物料id的工序路线及对应的步骤

    :get:`GET` :code:`/api/process_route/{id}/`

    ====================== =========== ============================
    参数                    参数类型    描述
    ---------------------- ----------- ----------------------------
    id                     int         工序路线id
    ====================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    materiel            int         工序路线id
    ------------------- ----------- ----------------------------
    process_steps       list        工艺步骤
    =================== =========== ============================

partial_update
^^^^^^^^^^^^^^^^^
    更新指定id的工序路线, 返回更新后的信息

    :patch:`PATCH` :code:`/api/process_route/{id}/`

    ====================== =========== ============================
    参数                    参数类型    描述
    ---------------------- ----------- ----------------------------
    id                     int         工序路线id
    ====================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    materiel            int         工艺物料id
    ------------------- ----------- ----------------------------
    process_steps       list        工艺步骤
    =================== =========== ============================

create
^^^^^^^^
    创建新的工序路线

    :post:`POST` :code:`/api/process_route/`

    ====================== =========== ============================
    参数                    参数类型    描述
    ---------------------- ----------- ----------------------------
    process_materials_id   int         招标文件的id
    ====================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    id                  int         工序路线id
    =================== =========== ============================

工序步骤
---------

list
^^^^^^^
    返回工序步骤列表

    :get:`GET` :code:`/api/process_step/`

    =================== =========== ============================
    参数                参数类型    描述
    ------------------- ----------- ----------------------------
    page(Optional)      int         指定页数, 默认值: 1
    ------------------- ----------- ----------------------------
    limit(Optional)     int         每页数量
    =================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    id                  int         工序步骤id
    ------------------- ----------- ----------------------------
    route               int         工艺路线id
    ------------------- ----------- ----------------------------
    step                int         工序
    ------------------- ----------- ----------------------------
    man_hours           float       工时
    =================== =========== ============================

read
^^^^^^^
    返回指定id的工序步骤

    :get:`GET` :code:`/api/process_step/{id}/`

    ====================== =========== ============================
    参数                    参数类型      描述
    ---------------------- ----------- ----------------------------
    id                     int         工序步骤id
    ====================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    id                  int         工序路线id
    ------------------- ----------- ----------------------------
    step                int         工序
    ------------------- ----------- ----------------------------
    man_hours           float       工时
    =================== =========== ============================

partial_update
^^^^^^^^^^^^^^^^^
    更新指定id的工序路线, 返回更新后的信息

    :patch:`PATCH` :code:`/api/process_route/{id}/`

    ====================== =========== ============================
    参数                    参数类型    描述
    ---------------------- ----------- ----------------------------
    id                     int         工序路线id
    ====================== =========== ============================


    =================== =========== ============================
    返回字段            返回类型    描述
    ------------------- ----------- ----------------------------
    step                int         工序
    ------------------- ----------- ----------------------------
    man_hours           float       工时
    =================== =========== ============================

